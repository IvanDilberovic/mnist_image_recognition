(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/Logo.8b8a523f.png"},function(e,t,a){e.exports=a(37)},,,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,function(e,t,a){"use strict";a.r(t);var n,i=a(0),s=a.n(i),r=a(9),o=a.n(r),l=(a(20),a(2)),c=a(3),u=a(5),d=a(4),h=a(6),m=(a(22),a(12)),g=a.n(m),p=a(13),f=a.n(p),v=(a(24),a(14)),y=a.n(v),b=function(){return s.a.createElement("div",{className:"divLogo ma4 mt0 w5"},s.a.createElement(f.a,{className:"Tilt br2 shadow-2",options:{max:60},style:{height:150,width:150}},s.a.createElement("div",{className:"Tilt-inner pa3"},s.a.createElement("img",{style:{paddingTop:"5px"},src:y.a,alt:"logo"}))))},O=a(7),w=a(1),j=(a(26),a(11),a(29),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"container"},s.a.createElement("table",{className:"table-fill"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{className:"text-center"},"Number"),s.a.createElement("th",{className:"text-center"},"Probability %"))),s.a.createElement("tbody",{className:"table-hover"},this.props.rows.map(function(e){return s.a.createElement("tr",{key:e.id},s.a.createElement("td",{className:"text-center"},e.key),s.a.createElement("td",{className:"text-center"},e.value))}))))}}]),t}(i.Component)),k=a(8),E=(a(31),a(33),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={loading:!1},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({loading:this.props.loading})}},{key:"render",value:function(){return this.props.loading?s.a.createElement("div",null,s.a.createElement("div",{className:"loader"},s.a.createElement("div",{className:"inner one"}),s.a.createElement("div",{className:"inner two"}),s.a.createElement("div",{className:"inner three"}),s.a.createElement("h4",null," Loading.... "))):null}}]),t}(i.Component)),S=(a(35),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleNavRight=function(e){return function(t){console.log("RIGHT",e);var n=Object(O.a)(a.state.layers),i=n.find(function(t){return t.layer===e.split(".")[0]}),s=n.indexOf(i);if(++s>=n.length)console.log("Index is grater or equal then the length of array.");else{var r=Object(k.a)({},n[s]);if(r.loaded){var o=Object(O.a)(a.state.images).find(function(e){return e.description.split(".")[0]===r.layer});a.setState({srcSet:o.srcSet,description:o.description})}else a.getLayerImage(a.state.drawnImage,r.layer)}}},a.handleNavLeft=function(e){return function(t){console.log("LEFT",e);var n=Object(O.a)(a.state.layers),i=n.find(function(t){return t.layer===e.split(".")[0]}),s=n.indexOf(i);if(--s<0)console.log("Index is lower then zero");else{var r=Object(k.a)({},n[s]);if(r.loaded){var o=Object(O.a)(a.state.images).find(function(e){return e.description.split(".")[0]===r.layer});a.setState({srcSet:o.srcSet,description:o.description})}}}},a.state={layers:[],images:[],drawnImage:"",srcSet:"",description:"",loading:!1},a.handleNavLeft=a.handleNavLeft.bind(Object(w.a)(Object(w.a)(a))),a.handleNavRight=a.handleNavRight.bind(Object(w.a)(Object(w.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleCustomRightNavClick",value:function(e){this.setState({loading:!0});var t=this.state.layers.find(function(e){return!1===e.loaded});"undefined"!==typeof t&&this.getLayerImage(this.state.drawnImage,t,e)}},{key:"getLayerImage",value:function(e,t){var a=this;this.setState({loading:!0}),fetch("https://image-recognition-api.herokuapp.com/api/GetLayerImage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({layer:[{layer:t}],image:e})}).then(function(e){return e.json()}).then(function(e){a.setState(function(t){return{images:Object(O.a)(t.images).concat([{description:e.images[0].name,srcSet:"data:image/png;base64,"+e.images[0].picture}])}});var n=a.state.layers.find(function(e){return e.layer===t}),i=Object(O.a)(a.state.layers),s=i.indexOf(n),r=Object(k.a)({},i[s]);r.loaded=!0,i[s]=r,a.setState({layers:i,srcSet:"data:image/png;base64,"+e.images[0].picture,description:e.images[0].name,loading:!1})})}},{key:"componentDidMount",value:function(){for(var e=[],t=0;t<this.props.layers.length;t++){var a=this.props.layers[t];0!==t?e.push({loaded:!1,layer:a}):e.push({loaded:!0,layer:a})}this.setState({layers:e,images:this.props.images,drawnImage:this.props.drawnImage,srcSet:this.props.images[0].srcSet,description:this.props.images[0].description})}},{key:"render",value:function(){return s.a.createElement("div",{className:"slideshow-container"},s.a.createElement("div",null,s.a.createElement("div",{className:"mySlides fade"},s.a.createElement("div",{className:"text"},this.state.description),s.a.createElement("img",{src:this.state.srcSet,style:{width:"100%"},alt:""})),s.a.createElement("button",{className:"prev",onClick:this.handleNavLeft(this.state.description)},"\u276e"),s.a.createElement("button",{className:"next",onClick:this.handleNavRight(this.state.description)},"\u276f")),s.a.createElement(E,{loading:this.state.loading}))}}]),t}(s.a.Component)),N=[],I=[],C=[],L=0,M=[],T="https://image-recognition-api.herokuapp.com",x=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={image:"",layers:[],predictions:[],layerImages:[],showResults:!1,loading:!1,showTableResults:!1,showImageResults:!1},a.handleMouseDown=a.handleMouseDown.bind(Object(w.a)(Object(w.a)(a))),a.handleMouseMove=a.handleMouseMove.bind(Object(w.a)(Object(w.a)(a))),a.handleMouseUp=a.handleMouseUp.bind(Object(w.a)(Object(w.a)(a))),a.handleMouseLeave=a.handleMouseLeave.bind(Object(w.a)(Object(w.a)(a))),a.handleOnSubmitImage=a.handleOnSubmitImage.bind(Object(w.a)(Object(w.a)(a))),a.handleOnSubmitClear=a.handleOnSubmitClear.bind(Object(w.a)(Object(w.a)(a))),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"addClick",value:function(e,t,a){N.push(e),I.push(t),C.push(a)}},{key:"redraw",value:function(){var e=this.refs.canvas.getContext("2d");e.clearRect(0,0,e.canvas.width,e.canvas.height),e.strokeStyle="black",e.lineJoin="round",e.lineWidth=10;for(var t=0;t<N.length;t++)e.beginPath(),C[t]&&t?e.moveTo(N[t-1],I[t-1]):e.moveTo(N[t]-1,I[t]),e.lineTo(N[t],I[t]),e.closePath(),e.stroke(),this.forceUpdate()}},{key:"handleMouseDown",value:function(e){var t=this.refs.canvas,a=e.pageX-t.offsetLeft,i=e.pageY-t.offsetTop;n=!0,this.addClick(a,i),this.redraw()}},{key:"handleMouseMove",value:function(e){if(n){var t=this.refs.canvas,a=e.pageX-t.offsetLeft,i=e.pageY-t.offsetTop;this.addClick(a,i,!0),this.redraw()}}},{key:"handleMouseUp",value:function(){n=!1}},{key:"handleMouseLeave",value:function(){n=!1}},{key:"componentDidMount",value:function(){var e=this.refs.canvas;e.setAttribute("width",150),e.setAttribute("height",150),e.style.backgroundColor="white",e.style.border="2px solid",e.style.margin="10px",e.style.marginLeft="auto",e.style.marginRight="auto",e.style.display="block";var t=e.getContext("2d");t.fillStyle="white",t.fillRect(0,0,e.width,e.height);var a=this.refs.canvasNetwork;a.setAttribute("width",150),a.setAttribute("height",150),a.style.backgroundColor="white",a.style.border="2px solid",a.style.margin="10px",a.style.marginLeft="auto",a.style.marginRight="auto",a.style.display="block",a.style.display="none";var n=a.getContext("2d");n.fillStyle="white",n.fillRect(0,0,a.width,a.height)}},{key:"handleOnSubmitImage",value:function(){this.setState({loading:!0});var e=this.refs.canvas.getContext("2d");e.globalCompositeOperation="destination-over",e.fillStyle="white",e.fillRect(0,0,150,150);for(var t=this.refs.canvasNetwork,a=t.getContext("2d"),n=e.getImageData(0,0,150,150),i=n.data,s=0;s<i.length;s+=4)i[s]=255-i[s],i[s+1]=255-i[s+1],i[s+2]=255-i[s+2];a.putImageData(n,0,0);var r=t.toDataURL("image/png");this.setState({image:r}),this.getLayerNames(r),a.clearRect(0,0,e.canvas.width,e.canvas.height),a.beginPath();var o=new Image;o.onload=function(){a.drawImage(o,t.width/2-14,t.height/2-14,28,28)},o.src=r}},{key:"getLayerNames",value:function(e){var t=this;fetch(T+"/api/GetLayerNames",{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(a){console.log("Layers",a.results),t.setState({layers:a.results}),t.sendToNetwork(e)})}},{key:"sendToNetwork",value:function(e){var t=this;console.log("DATA SENT -> ",JSON.stringify({image:e})),fetch(T+"/api/GetPrediction",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:e})}).then(function(e){return e.json()}).then(function(a){console.log("DATA RECEIVED -> ",a),t.handleData(a),t.getLayerImage(e)})}},{key:"handleData",value:function(e){for(var t=0;t<4;t++){var a=e.results[t];M.push(this.createData(a.key,a.value))}this.setState({predictions:M})}},{key:"createData",value:function(e,t){return{id:L+=1,key:e,value:t}}},{key:"getLayerImage",value:function(e){var t=this;fetch(T+"/api/GetLayerImage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({layer:[{layer:this.state.layers[0]}],image:e})}).then(function(e){return e.json()}).then(function(e){for(var a=[],n=0;n<e.images.length;n++){var i=e.images[n];a.push({description:i.name,srcSet:"data:image/png;base64,"+i.picture})}t.setState({layerImages:a},function(){console.log("CALLBACK",t.state.layerImages),t.setState({showResults:!0,loading:!1})})})}},{key:"getAllLayerImages",value:function(e){var t=this;fetch(T+"/api/GetAllLayerImages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:e})}).then(function(e){return e.json()}).then(function(e){for(var a=[],n=0;n<e.images.length;n++){var i=e.images[n];a.push({description:i.name,srcSet:"data:image/png;base64,"+i.picture})}t.setState(function(e){return{layerImages:Object(O.a)(e.layerImages).concat([a])}},function(){return console.log(t.state.layerImages)}),t.setState({showResults:!0,showImageResults:!0})})}},{key:"getWeightImage",value:function(){fetch(T+"/api/GetWeightImage",{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){console.log(e.images)})}},{key:"handleOnSubmitClear",value:function(){var e=this.refs.canvas.getContext("2d"),t=this.refs.canvasNetwork.getContext("2d");e.clearRect(0,0,e.canvas.width,e.canvas.height),e.beginPath(),t.clearRect(0,0,t.canvas.width,t.canvas.height),t.beginPath(),N=[],I=[],C=[],M=[],this.setState({image:"",layers:[],predictions:[],layerImages:[],showResults:!1,loading:!1})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("canvas",{ref:"canvas",onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave}),s.a.createElement("input",{type:"submit",value:"SUBMIT",onClick:this.handleOnSubmitImage}),s.a.createElement("input",{type:"submit",value:"CLEAR",onClick:this.handleOnSubmitClear})," ",s.a.createElement("canvas",{ref:"canvasNetwork"}),s.a.createElement("hr",null),this.state.showResults?s.a.createElement("div",null,s.a.createElement(j,{rows:this.state.predictions})," ",s.a.createElement("hr",null),s.a.createElement(S,{images:this.state.layerImages,layers:this.state.layers,drawnImage:this.state.image})):s.a.createElement(E,{loading:this.state.loading}))}}]),t}(i.Component),R={particles:{number:{value:150,density:{enable:!0,value_area:800}},color:{value:"#000000"},shape:{type:"circle",stroke:{width:.5,color:"#ffffff"},polygon:{nb_sides:5}},opacity:{value:.20518162519630342,random:!1,anim:{enable:!1,speed:1,opacity_min:.1,sync:!1}},size:{value:3,random:!0,anim:{enable:!1,speed:40,size_min:.1,sync:!1}},line_linked:{enable:!0,distance:150,color:"#ffffff",opacity:.4,width:1},move:{enable:!0,speed:6,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:600,rotateY:1200}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!1,mode:"repulse"},onclick:{enable:!0,mode:"push"},resize:!0},modes:{grab:{distance:400,line_linked:{opacity:1}},bubble:{distance:400,size:40,duration:2,opacity:8,speed:3},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!0},D=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(b,null),s.a.createElement("h2",null,"MNIST image recognition"),s.a.createElement(x,null),s.a.createElement(g.a,{className:"particles",params:R})," ")}}]),t}(i.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[15,2,1]]]);
//# sourceMappingURL=main.02b999c6.chunk.js.map